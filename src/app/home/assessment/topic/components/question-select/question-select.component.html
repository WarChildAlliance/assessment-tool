<!-- Options with only one choice -->
<section *ngIf="!question.multiple">
    <mat-radio-group [formControl]="valueForm" class="options-container" [class]="question.display_type | lowercase">
        <ng-container *ngFor="let option of question.options">
            <div *ngIf="hasImageAttached(option); else noImageAttached" class="option -card"
                 [class]="getAnswerBackgroundStyle(option)">
                <mat-card (click)="!displayCorrectAnswer.getValue() ? valueForm.setValue(option) : null">
                    <mat-card-content>
                        <div *ngFor="let attachment of option.attachments" class="image-attachment">
                            <img *ngIf="attachment.attachment_type === 'IMAGE'" [src]="getSource(attachment.file)" alt="">
                        </div>
                    </mat-card-content>
                    <mat-card-actions align="center">
                        <mat-radio-button [disabled]="displayCorrectAnswer.getValue()" [value]="option">
                            {{ option.title }}
                        </mat-radio-button>
                        <ng-container *ngFor="let attachment of option.attachments">
                            <button *ngIf="attachment.attachment_type === 'AUDIO'" mat-icon-button
                                    [appAudioPlay]="getSource(attachment.file)">
                                <img width="40" height="40" src="assets/icons/audio-button.svg" alt="">

                            </button>
                        </ng-container>
                    </mat-card-actions>
                </mat-card>
            </div>
            <ng-template #noImageAttached>
                <div (click)="!displayCorrectAnswer.getValue() ? valueForm.setValue(option) : null"
                     [class]="getAnswerBackgroundStyle(option)" class="option">
                    <mat-radio-button [disabled]="displayCorrectAnswer.getValue()" [value]="option">
                        {{ option.title }}
                        <ng-container *ngFor="let attachment of option.attachments">
                            <button *ngIf="attachment.attachment_type === 'AUDIO'" mat-icon-button
                                    [appAudioPlay]="getSource(attachment.file)">
                                <img width="40" height="40" src="assets/icons/audio-button.svg" alt="">
                            </button>
                        </ng-container>
                    </mat-radio-button>
                </div>
            </ng-template>
        </ng-container>
    </mat-radio-group>
</section>

<!-- Options with multiple choices -->
<section class="options-container" [class]="question.display_type | lowercase" [formGroup]="multipleSelectForm"
         *ngIf="question.multiple">
    <ng-container formArrayName="selectedOptions" *ngFor="let option of question.options; let i = index">
        <div *ngIf="hasImageAttached(option); else noImageAttachmentOption"
             [class]="getAnswerBackgroundStyle(option)" [formGroupName]="i" class="option -card">
            <mat-card>
                <mat-card-content (click)="setCheckboxSelection(i)">
                    <div *ngFor="let attachment of option.attachments">
                        <img  width="auto" height="120px"  *ngIf="attachment.attachment_type === 'IMAGE'" [src]="getSource(attachment.file)" alt="">
                    </div>
                </mat-card-content>
                <mat-card-actions align="center">
                    <mat-checkbox (click)="setCheckboxSelection(i)" formControlName="selected">
                        <span>
                            {{ option.title }}
                        </span>
                    </mat-checkbox>

                    <ng-container *ngFor="let attachment of option.attachments">
                        <button *ngIf="attachment.attachment_type === 'AUDIO'" mat-icon-button
                                [appAudioPlay]="getSource(attachment.file)">
                            <img width="40" height="40" src="assets/icons/audio-button.svg" alt="">

                        </button>
                    </ng-container>

                </mat-card-actions>
            </mat-card>
        </div>
        <ng-template #noImageAttachmentOption>
            <div (click)="setCheckboxSelection(i)" [formGroupName]="i" [class]="getAnswerBackgroundStyle(option)"
                 class="option">
                <mat-checkbox formControlName="selected">
                    <span>
                        {{ option.title }}
                    </span>
                    <ng-container *ngFor="let attachment of option.attachments">
                        <button *ngIf="attachment.attachment_type === 'AUDIO'" mat-icon-button
                                [appAudioPlay]="getSource(attachment.file)">
                            <img width="40" height="40" src="assets/icons/audio-button.svg" alt="">
                        </button>
                    </ng-container>
                </mat-checkbox>
            </div>
        </ng-template>
    </ng-container>
</section>
